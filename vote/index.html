<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-Voting OSIS</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
        .card {
            margin-bottom: 20px;
        }
    </style>
</head>

<body>

    <div class="container mt-5">
	<img src="../halo.png" alt="Halo Image" style="max-width: 100%; height: auto;">
        <h1 class="text-center mb-4">Klik salah satu gambar calon dibawah untuk memilih..</h1>
        <div class="row">
            <div class="col-md-6 col-lg-3">
                <div class="card">

                    <div class="card-body">
                        <h5 class="card-title">Calon 1</h5>
                        <button class="btn btn-primary vote-btn" data-calon="1"><img src="calon1.gif" class="card-img-top" alt="Calon 1">Pilih Calon Ini</button>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg-3">
                <div class="card">
      
                    <div class="card-body">
                        <h5 class="card-title">Calon 2</h5>
                        <button class="btn btn-primary vote-btn" data-calon="2"><img src="calon2.jpg" class="card-img-top" alt="Calon 2">Pilih Calon Ini</button>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg-3">
                <div class="card">
               
                    <div class="card-body">
                        <h5 class="card-title">Calon 3</h5>
                        <button class="btn btn-primary vote-btn" data-calon="3"><img src="calon3.jpg" class="card-img-top" alt="Calon 3">Pilih Calon Ini</button>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg-3">
                <div class="card">
           
                    <div class="card-body">
                        <h5 class="card-title">Calon 4</h5>
                        <button class="btn btn-primary vote-btn" data-calon="4"><img src="calon4.jpg" class="card-img-top" alt="Calon 4">Pilih Calon Ini</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Konfirmasi -->
    <div class="modal fade" id="confirmationModal" tabindex="-1" aria-labelledby="confirmationModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Apakah yakin ingin memilih calon ini?</h5>
					<img src="1.gif" alt="Halo Image" style="max-width: 150px; height: 150px;">
                   
                </div>
                <div class="modal-body">
                    <h2>Pilihanmu akan mementukan suatu nasib,yakin pilih calon ini?</h2>
                </div>
				   <div class="modal-footer">
                <button class="btn btn-primary d-flex justify-content-center align-items-center" class="btn btn-primary" id="confirmVote" style="width: 100%; height: 100px;">
                    <h1>Ya</h1>
                </button>
			
				<button class="btn btn-secondary" style="width: 100%; height: 100px;" data-bs-dismiss="modal"><h1>Tidak</h1></button>
            </div>
	
				
				
				<br>
            
    
				
            </div>
        </div>
    </div>
	


<!-- Loading Modal -->
<div class="modal fade" id="loadingModal" tabindex="-1" aria-labelledby="loadingModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-fullscreen"> <!-- Use modal-fullscreen class to make it occupy the entire screen -->
        <div class="modal-content">
            <div class="modal-body text-center">
			<br>
			<br>
			<br>
                <img src="load.gif" alt="Loading Animation" style="max-width: 100%; height: auto;" class="rounded-circle">
                <h5>sebentar..</h5>
            </div>
			
        </div>
    </div>
</div>

<!-- Add this style to your existing styles -->
<style>
    /* Other styles... */

    .fade .modal-dialog.modal-fullscreen {
        transform: scale(0.1); /* Initial scale for zooming effect */
        transition: transform 0.3s ease-in-out;
    }

    .fade.show .modal-dialog.modal-fullscreen {
        transform: scale(1); /* Scale to 100% for zooming effect */
    }
</style>

    <!-- Modal Error -->
<div class="modal fade" id="errorModal" tabindex="-1" aria-labelledby="errorModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="errorModalLabel">Terjadi Galat</h5>
				<img src="2.gif" alt="Halo Image" style="max-width: 200px; height: 150px;">

            </div>
            <div class="modal-body">
			
                <h4>Terjadi galat, mohon coba lagi :( </h4>
				
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary d-flex justify-content-center align-items-center" data-bs-dismiss="modal" style="width: 100%; height: 100px;">
                    <h1>OK</h1>
                </button>
            </div>
        </div>
    </div>
</div>
<!-- Thank You Modal -->
<div class="modal fade" id="thankYouModal" tabindex="-1" aria-labelledby="thankYouModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Terima Kasih!</h5>
				<img src="3.gif" alt="Halo Image" style="max-width: 200px; height: 150px;">
            </div>
            <div class="modal-body">
                <p>Terima kasih telah melakukan pilihan Anda.</p>
            </div>
         
        </div>
    </div>
</div>


				
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>




<script>
    $(document).ready(function() {
        var selectedCalon;

        $(".vote-btn").click(function() {
            selectedCalon = $(this).data("calon");
            $("#confirmationModal").modal("show");
        });

        $("#confirmVote").click(function() {
            $("#loading-overlay").addClass("loading"); // Add class to enable overlay and disable interactions
            $("#confirmationModal").modal("hide");
            $("#loadingModal").modal("show"); // Show the loading modal before the AJAX request

            $.ajax({
                type: "POST",
                url: "process_vote.php",
                data: { calonID: selectedCalon },
                success: function(response) {
                    $("#loadingModal").modal("hide"); // Hide the loading modal on success
                    if (response === "success") {
                        $("#thankYouModal").modal("show"); // Show the Thank You modal
                        setTimeout(function() {
                            window.location.href = "../"; // Redirect after a delay
                        }, 5000); // Adjust the delay (in milliseconds) as needed
                    } else {
                        $("#errorModal").modal("show");
                    }
                },
                error: function() {
                    $("#loadingModal").modal("hide"); // Hide the loading modal on error
                    $("#errorModal").modal("show");
                },
                complete: function() {
                    $("#loading-overlay").removeClass("loading"); // Remove class to re-enable interactions
                }
            });
        });
    });
</script>
<style>
    /* Other styles... */

    #loading-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent black */
        z-index: 1000; /* Place above other elements */
        display: none;
        pointer-events: none; /* Allow interactions when hidden */
    }

    .loading {
        pointer-events: auto; /* Enable interactions when shown */
    }
</style>

</body>

</html>
